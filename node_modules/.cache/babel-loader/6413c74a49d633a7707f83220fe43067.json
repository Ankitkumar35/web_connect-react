{"ast":null,"code":"var _jsxFileName = \"/Users/ankit/Desktop/ism-connect-web-main/src/components/feed/Writer.js\";\nimport { Component } from 'react';\nimport { Card, Image, Button, OverlayTrigger, Tooltip } from 'react-bootstrap';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport * as icons from '@fortawesome/free-solid-svg-icons';\nimport axios from 'axios';\nimport WriterModal from '../post/WriterModal';\nimport BrowserStore from '../../utils/BrowserStore';\nimport '../../styles/post/writer.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar cur = null;\nexport default class Writer extends Component {\n  constructor() {\n    super(...arguments);\n    this.state = {\n      showWriterModal: false,\n      writerModalContent: null,\n      editorMode: null,\n      editorContent: {},\n      images: [],\n      organisation: null,\n      buttons: [{\n        color: 'lightgreen',\n        tip: 'Write an article',\n        icon: icons.faPen,\n        onClick: () => this.openWriterModal(this.state.editorContent, 'article')\n      }, {\n        color: 'pink',\n        tip: 'Create an event',\n        icon: icons.faCalendar\n      }, {\n        color: 'lightblue',\n        tip: 'Add a job',\n        icon: icons.faBriefcase,\n        onClick: () => this.openWriterModal(this.state.editorContent, 'job')\n      }, {\n        color: 'lightgray',\n        tip: 'Post a video',\n        icon: icons.faVideo\n      }, {\n        color: 'yellow',\n        tip: 'Post images',\n        icon: icons.faImage,\n        onClick: () => this.openWriterModal(this.state.editorContent, 'image')\n      }]\n    };\n\n    this.addImage = img => this.setState({\n      images: [...this.state.images, img]\n    });\n\n    this.deleteImage = img => {\n      const idx = this.state.images.findIndex(i => i.id === img);\n      let images = this.state.images;\n      images.splice(idx, 1);\n      this.setState({\n        images\n      });\n    };\n\n    this.handleOrganisationChange = organisation => this.setState({\n      organisation\n    });\n\n    this.renderTooltip = props => {\n      return /*#__PURE__*/_jsxDEV(Tooltip, { ...props,\n        children: props.message || ''\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 10\n      }, this);\n    };\n\n    this.onEditorContentChange = editorContent => {\n      console.log(editorContent);\n      this.setState({\n        editorContent\n      });\n    };\n\n    this.onCancel = () => {\n      this.setState({\n        showWriterModal: false,\n        editorContent: {},\n        editorMode: null\n      });\n    };\n\n    this.openWriterModal = (content, mode) => {\n      console.log(mode);\n      cur = mode;\n      this.setState({\n        showWriterModal: true,\n        editorContent: content,\n        editorMode: mode\n      });\n      debugger;\n      console.log(this.state);\n    };\n\n    this.onSubmit = value => {\n      const user = JSON.parse(localStorage.getItem('user-info'));\n\n      if (cur === 'job') {\n        value = value.editorContent;\n        console.log(value);\n        const user = BrowserStore.get('user-info', true); // TODO: Create or edit the entity here based on editor mode\n\n        axios.post(process.env.REACT_APP_HEROKU_URL + '/api/v1/storeJobs', {\n          user_id: user.id,\n          company: value[\"company\"],\n          category: value[\"category\"],\n          profile: value[\"profile\"]\n        }, {\n          headers: {\n            Authorization: `Bearer ${BrowserStore.get('userToken')}`\n          }\n        }).then(res => {\n          console.log(res.data);\n          console.log(cur);\n        }).catch(err => {\n          console.log(err);\n        });\n      } else if (cur === 'article') {\n        var title = value.editorContent.title;\n        var body = value.editorContent.content[0].children[0].text;\n        var images = value.images;\n        axios.post(process.env.REACT_APP_HEROKU_URL + '/api/v1/feed', {\n          feed_heading: title,\n          username: user.name,\n          image_path: \"Empty\",\n          user_id: user.id,\n          content: body,\n          images: images\n        }, {\n          headers: {\n            Authorization: `Bearer ${BrowserStore.get('userToken')}`\n          }\n        }).then(res => {\n          this.setState({\n            images: []\n          });\n          console.log(res.data);\n          console.log(cur);\n        }).catch(err => {\n          console.log(err);\n        });\n      }\n\n      this.onCancel();\n    };\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(WriterModal, {\n        images: this.state.images,\n        addImage: this.addImage,\n        deleteImage: this.deleteImage,\n        possibleSuggestions: this.props.possibleSuggestions,\n        onHide: this.onCancel,\n        onSubmit: this.onSubmit,\n        body: this.state.writerModalContent,\n        show: this.state.showWriterModal,\n        editorMode: this.state.editorMode,\n        handleEditorContentChange: this.onEditorContentChange,\n        editorContent: this.state.editorContent,\n        handleOrganisationChange: this.handleOrganisationChange,\n        organisation: this.state.organisation\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 147,\n        columnNumber: 4\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"post mx-auto shadow\",\n        children: /*#__PURE__*/_jsxDEV(Card, {\n          className: \"post-card\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"d-flex flex-column\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"d-flex flex-row align-items-center\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"d-flex align-items-center\",\n                children: /*#__PURE__*/_jsxDEV(Image, {\n                  src: this.props.image,\n                  width: \"50px\",\n                  height: \"50px\",\n                  roundedCircle: true,\n                  style: {\n                    border: '3px solid #c14b47',\n                    boxSizing: 'border-box',\n                    objectFit: 'cover',\n                    marginRight: '20px'\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 167,\n                  columnNumber: 9\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 166,\n                columnNumber: 8\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"d-flex align-items-center\",\n                style: {\n                  overflowX: 'auto'\n                },\n                children: this.state.buttons.map((b, idx) => /*#__PURE__*/_jsxDEV(\"div\", {\n                  children: /*#__PURE__*/_jsxDEV(OverlayTrigger, {\n                    placement: \"bottom\",\n                    delay: {\n                      show: 100,\n                      hide: 400\n                    },\n                    overlay: props => this.renderTooltip({\n                      message: b.tip,\n                      ...props\n                    }),\n                    children: /*#__PURE__*/_jsxDEV(Button, {\n                      style: {\n                        border: '3px solid ' + b.color,\n                        marginRight: '10px',\n                        background: b.color\n                      },\n                      variant: 'outline',\n                      className: \"writer-button\",\n                      onClick: b.onClick || (() => {}),\n                      children: /*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n                        icon: b.icon\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 199,\n                        columnNumber: 14\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 189,\n                      columnNumber: 11\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 184,\n                    columnNumber: 10\n                  }, this)\n                }, idx, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 183,\n                  columnNumber: 45\n                }, this))\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 180,\n                columnNumber: 8\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 165,\n              columnNumber: 7\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 164,\n            columnNumber: 6\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 163,\n          columnNumber: 5\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 162,\n        columnNumber: 4\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 4\n    }, this);\n  }\n\n}","map":{"version":3,"sources":["/Users/ankit/Desktop/ism-connect-web-main/src/components/feed/Writer.js"],"names":["Component","Card","Image","Button","OverlayTrigger","Tooltip","FontAwesomeIcon","icons","axios","WriterModal","BrowserStore","cur","Writer","state","showWriterModal","writerModalContent","editorMode","editorContent","images","organisation","buttons","color","tip","icon","faPen","onClick","openWriterModal","faCalendar","faBriefcase","faVideo","faImage","addImage","img","setState","deleteImage","idx","findIndex","i","id","splice","handleOrganisationChange","renderTooltip","props","message","onEditorContentChange","console","log","onCancel","content","mode","onSubmit","value","user","JSON","parse","localStorage","getItem","get","post","process","env","REACT_APP_HEROKU_URL","user_id","company","category","profile","headers","Authorization","then","res","data","catch","err","title","body","children","text","feed_heading","username","name","image_path","render","possibleSuggestions","image","border","boxSizing","objectFit","marginRight","overflowX","map","b","show","hide","background"],"mappings":"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","sourcesContent":["import { Component } from 'react'\nimport { Card, Image, Button, OverlayTrigger, Tooltip } from 'react-bootstrap'\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport * as icons from '@fortawesome/free-solid-svg-icons'\nimport axios from 'axios'\n\nimport WriterModal from '../post/WriterModal'\nimport BrowserStore from '../../utils/BrowserStore'\n\nimport '../../styles/post/writer.css'\n\nvar cur = null;\nexport default class Writer extends Component {\n\n\tstate = {\n\t\tshowWriterModal: false,\n\t\twriterModalContent: null,\n\t\teditorMode: null,\n\t\teditorContent: {},\n\t\timages:[],\n\t\torganisation: null,\n\t\tbuttons: [\n\t\t\t{\n\t\t\t\tcolor: 'lightgreen',\n\t\t\t\ttip: 'Write an article',\n\t\t\t\ticon: icons.faPen,\n\t\t\t\tonClick: () => this.openWriterModal(this.state.editorContent, 'article')\n\t\t\t},\n\t\t\t{\n\t\t\t\tcolor: 'pink',\n\t\t\t\ttip: 'Create an event',\n\t\t\t\ticon: icons.faCalendar\n\t\t\t},\n\t\t\t{\n\t\t\t\tcolor: 'lightblue',\n\t\t\t\ttip: 'Add a job',\n\t\t\t\ticon: icons.faBriefcase,\n\t\t\t\tonClick: () => this.openWriterModal(this.state.editorContent, 'job')\n\n\t\t\t},\n\t\t\t{\n\t\t\t\tcolor: 'lightgray',\n\t\t\t\ttip: 'Post a video',\n\t\t\t\ticon: icons.faVideo\n\t\t\t},\n\t\t\t{\n\t\t\t\tcolor: 'yellow',\n\t\t\t\ttip: 'Post images',\n\t\t\t\ticon: icons.faImage,\n\t\t\t\tonClick: () => this.openWriterModal(this.state.editorContent, 'image')\n\t\t\t}\n\t\t]\n\t}\n\n\taddImage = img => this.setState({ images: [...this.state.images, img ] })\n\n  deleteImage = img => {\n    const idx = this.state.images.findIndex(i => i.id === img)\n    let images = this.state.images\n    images.splice(idx, 1)\n    this.setState({ images })\n  }\n\thandleOrganisationChange = organisation => this.setState({ organisation })\n\t\n\trenderTooltip = props => {\n\t\treturn <Tooltip {...props}>\n\t\t\t{props.message || ''}\n\t\t</Tooltip>\n\t}\n\n\tonEditorContentChange = (editorContent) => {\n\t\tconsole.log(editorContent)\n\t\tthis.setState({ editorContent })\n\t}\n\n\tonCancel = () => {\n\t\tthis.setState({ showWriterModal: false, editorContent: {}, editorMode: null })\n\t}\n\n\topenWriterModal = (content, mode) => {\n\t\tconsole.log(mode);\n\t\tcur = mode\n\t\tthis.setState({ showWriterModal: true, editorContent: content, editorMode: mode })\n\t\tdebugger\n\t\tconsole.log(this.state)\n\t}\n\n\tonSubmit = (value) => {\n\t\tconst user = JSON.parse(localStorage.getItem('user-info'));\n\t\tif(cur==='job')\n\t\t{\n\t\t\tvalue = value.editorContent;\n\t\t\tconsole.log(value);\n\t\t\tconst user = BrowserStore.get('user-info', true);\n\t\t\t// TODO: Create or edit the entity here based on editor mode\n\t\t\taxios.post(process.env.REACT_APP_HEROKU_URL + '/api/v1/storeJobs', { \n\t\t\t\tuser_id: user.id,\n\t\t\t\tcompany:value[\"company\"],\n\t\t\t\tcategory:value[\"category\"],\n\t\t\t\tprofile:value[\"profile\"]\n\t\t\t\t}, \n\t\t\t\t{\n\t\t\t\theaders: {\n\t\t\t\tAuthorization: `Bearer ${BrowserStore.get('userToken')}`\n\t\t\t\t}\n\t\t\t}).then((res) => {\n\t\t\t\tconsole.log(res.data);\n\t\t\t\tconsole.log(cur);\n\t\t\t})\n\t\t\t\t.catch((err) => {\n\t\t\t\tconsole.log(err)\n\t\t\t\t})\n\t\t}\n\t\telse if(cur==='article')\n\t\t{\n\t\t\tvar title = value.editorContent.title;\n\t\t\tvar body = value.editorContent.content[0].children[0].text;\n\t\t\tvar images = value.images;\n\t\t\taxios.post(process.env.REACT_APP_HEROKU_URL + '/api/v1/feed', { \n\t\t\t\tfeed_heading:title,\n\t\t\t\tusername:user.name,\n\t\t\t\timage_path:\"Empty\",\n\t\t\t\tuser_id:user.id,\n\t\t\t\tcontent:body,\n\t\t\t\timages:images\n\t\t\t\t}, \n\t\t\t\t{\n\t\t\t\theaders: {\n\t\t\t\tAuthorization: `Bearer ${BrowserStore.get('userToken')}`\n\t\t\t\t}\n\t\t\t}).then((res) => {\n\t\t\t\tthis.setState({images:[]})\n\t\t\t\tconsole.log(res.data);\n\t\t\t\tconsole.log(cur);\n\t\t\t})\n\t\t\t\t.catch((err) => {\n\t\t\t\tconsole.log(err)\n\t\t\t\t})\n\t\t\t\n\t\t}\n\t\tthis.onCancel()\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<div>\n\t\t\t<WriterModal \n\t\t\t\timages={this.state.images}\n\t\t\t\taddImage={this.addImage}\n\t\t\t\tdeleteImage={this.deleteImage}\n\t\t\t\tpossibleSuggestions = {this.props.possibleSuggestions}\n\t\t\t\tonHide={this.onCancel} \n\t\t\t\tonSubmit={this.onSubmit} \n\t\t\t\tbody={this.state.writerModalContent} \n\t\t\t\tshow={this.state.showWriterModal} \n\t\t\t\teditorMode={this.state.editorMode} \n\t\t\t\thandleEditorContentChange={this.onEditorContentChange} \n\t\t\t\teditorContent={this.state.editorContent}\n\t\t\t\thandleOrganisationChange={this.handleOrganisationChange}\n\t\t\t\torganisation={this.state.organisation}/>\n\n\t\t\t<div className=\"post mx-auto shadow\">\n\t\t\t\t<Card className=\"post-card\">\n\t\t\t\t\t<div className=\"d-flex flex-column\">\n\t\t\t\t\t\t<div className=\"d-flex flex-row align-items-center\">\n\t\t\t\t\t\t\t<div className=\"d-flex align-items-center\">\n\t\t\t\t\t\t\t\t<Image \n\t\t\t\t\t    \t\t\tsrc={this.props.image} \n\t\t\t\t\t    \t\t\twidth=\"50px\" \n\t\t\t\t\t    \t\t\theight=\"50px\"\n\t\t\t\t\t    \t\t\troundedCircle \n\t\t\t\t\t    \t\t\tstyle={{\n\t\t\t\t\t    \t\t\t\tborder: '3px solid #c14b47',\n\t\t\t\t\t    \t\t\t\tboxSizing: 'border-box',\n\t\t\t\t\t    \t\t\t\tobjectFit: 'cover',\n\t\t\t\t\t    \t\t\t\tmarginRight: '20px'\n\t\t\t\t\t    \t\t\t}}\n\t\t\t\t\t    \t\t/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div className=\"d-flex align-items-center\" style={{\n\t\t\t\t\t\t\t\toverflowX: 'auto'\n\t\t\t\t\t\t\t}}>\n\t\t\t\t\t\t\t\t{this.state.buttons.map((b, idx) => <div key={idx}>\n\t\t\t\t\t\t\t\t\t<OverlayTrigger\n\t\t\t\t\t\t\t\t    placement=\"bottom\"\n\t\t\t\t\t\t\t\t    delay={{ show: 100, hide: 400 }}\n\t\t\t\t\t\t\t\t    overlay={props => this.renderTooltip({ message: b.tip, ...props})}\n\t\t\t\t\t\t\t\t  >\n\t\t\t\t\t\t\t\t\t\t<Button \n\t\t\t\t\t\t    \t\t\tstyle={{\n\t\t\t\t\t\t    \t\t\t\tborder: '3px solid ' + b.color,\n\t\t\t\t\t\t    \t\t\t\tmarginRight: '10px',\n\t\t\t\t\t\t    \t\t\t\tbackground: b.color\n\t\t\t\t\t\t    \t\t\t}}\n\t\t\t\t\t\t    \t\t\tvariant={'outline'}\n\t\t\t\t\t\t    \t\t\tclassName=\"writer-button\"\n\t\t\t\t\t\t    \t\t\tonClick={b.onClick || (() => {})}\n\t\t\t\t\t\t    \t\t>\n\t\t\t\t\t\t    \t\t\t<FontAwesomeIcon  icon={b.icon} />\n\t\t\t\t\t\t    \t\t</Button>\n\t\t\t\t\t\t    \t</OverlayTrigger>\n\t\t\t\t\t\t\t\t</div>)}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</Card>\n\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n}\n"]},"metadata":{},"sourceType":"module"}