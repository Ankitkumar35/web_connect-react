{"ast":null,"code":"var _jsxFileName = \"/Users/ankit/Desktop/ism-connect-web-main/src/components/comments/Comment.js\";\nimport { faReply, faPen as faEdit } from '@fortawesome/free-solid-svg-icons';\nimport CommentForm from './CommentForm';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Comment = _ref => {\n  let {\n    comment,\n    replies,\n    setActiveComment,\n    activeComment,\n    updateComment,\n    deleteComment,\n    addComment,\n    parentId = null,\n    currentUserId,\n    getReplies\n  } = _ref;\n  const isEditing = activeComment && activeComment.id === comment.id && activeComment.type === 'editing';\n  const isReplying = activeComment && activeComment.id === comment.id && activeComment.type === 'replying';\n  const fiveMinutes = 5 * 60 * 1000;\n  const timePassed = new Date() - new Date(comment.createdAt) > fiveMinutes;\n  const canDelete = currentUserId === comment.userId && replies.length === 0 && !timePassed;\n  const canReply = Boolean(currentUserId);\n  const canEdit = currentUserId === comment.userId && !timePassed; // const canEdit = currentUserId === comment.userId && !timePassed\n\n  const replyId = parentId || comment.id;\n  const createdAt = new Date(comment.createdAt).toLocaleDateString(); // console.log(comment)\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"comment\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"comment-image-container\",\n      children: /*#__PURE__*/_jsxDEV(\"img\", {\n        src: comment.profileImage || '/logo192.png',\n        width: \"50px\",\n        alt: \"User Icon\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 33,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 32,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"comment-right-part\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"comment-content\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"comment-author\",\n          children: comment.userName\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 37,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 36,\n        columnNumber: 9\n      }, this), !isEditing && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"comment-text\",\n        children: comment.body\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 40,\n        columnNumber: 24\n      }, this), isEditing && /*#__PURE__*/_jsxDEV(CommentForm, {\n        submitLabel: faEdit,\n        hasCancelButton: true,\n        initialText: comment.body,\n        handleSubmit: text => updateComment(text, comment.id),\n        handleCancel: () => {\n          setActiveComment(null);\n        },\n        placeholder: \"Updated comment\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 42,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"comment-actions\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"comment-date\",\n          children: [\" \", createdAt, \" \"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 54,\n          columnNumber: 11\n        }, this), canReply && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"comment-action\",\n          onClick: () => setActiveComment({\n            id: comment.id,\n            type: 'replying'\n          }),\n          children: \"Reply\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 56,\n          columnNumber: 13\n        }, this), canEdit && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"comment-action\",\n          onClick: () => setActiveComment({\n            id: comment.id,\n            type: 'editing'\n          }),\n          children: \"Edit\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 65,\n          columnNumber: 13\n        }, this), canDelete && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"comment-action\",\n          onClick: () => deleteComment(comment.id),\n          children: \"Delete\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 9\n      }, this), isReplying && /*#__PURE__*/_jsxDEV(CommentForm, {\n        submitLabel: faReply,\n        handleSubmit: text => addComment(text, replyId),\n        placeholder: \"Reply\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 11\n      }, this), replies.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"replies\",\n        children: replies.map(reply => /*#__PURE__*/_jsxDEV(Comment, {\n          profileImage: reply.profileImage,\n          comment: reply,\n          setActiveComment: setActiveComment,\n          activeComment: activeComment,\n          updateComment: updateComment,\n          deleteComment: deleteComment,\n          addComment: addComment,\n          parentId: reply.id,\n          replies: getReplies(reply.id),\n          currentUserId: currentUserId,\n          getReplies: getReplies\n        }, reply.id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 15\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 35,\n      columnNumber: 7\n    }, this)]\n  }, comment.id, true, {\n    fileName: _jsxFileName,\n    lineNumber: 31,\n    columnNumber: 5\n  }, this);\n};\n\n_c = Comment;\nexport default Comment;\n\nvar _c;\n\n$RefreshReg$(_c, \"Comment\");","map":{"version":3,"sources":["/Users/ankit/Desktop/ism-connect-web-main/src/components/comments/Comment.js"],"names":["faReply","faPen","faEdit","CommentForm","Comment","comment","replies","setActiveComment","activeComment","updateComment","deleteComment","addComment","parentId","currentUserId","getReplies","isEditing","id","type","isReplying","fiveMinutes","timePassed","Date","createdAt","canDelete","userId","length","canReply","Boolean","canEdit","replyId","toLocaleDateString","profileImage","userName","body","text","map","reply"],"mappings":"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","sourcesContent":["import { faReply, faPen as faEdit } from '@fortawesome/free-solid-svg-icons'\n\nimport CommentForm from './CommentForm'\n\nconst Comment = ({\n  comment, replies, setActiveComment,\n  activeComment, updateComment, deleteComment,\n  addComment, parentId = null, currentUserId, getReplies\n}) => {\n  \n  const isEditing =\n    activeComment &&\n    activeComment.id === comment.id &&\n    activeComment.type === 'editing'\n  const isReplying =\n    activeComment &&\n    activeComment.id === comment.id &&\n    activeComment.type === 'replying'\n  const fiveMinutes = 5 * 60 * 1000\n  const timePassed = new Date() - new Date(comment.createdAt) > fiveMinutes\n  const canDelete =\n    currentUserId === comment.userId && replies.length === 0 && !timePassed\n  const canReply = Boolean(currentUserId)\n  const canEdit = (currentUserId === comment.userId ) && !timePassed\n\n  // const canEdit = currentUserId === comment.userId && !timePassed\n  const replyId = parentId || comment.id \n  const createdAt = new Date(comment.createdAt).toLocaleDateString()\n  // console.log(comment)\n  return (\n    <div key={comment.id} className='comment'>\n      <div className='comment-image-container'>\n        <img src={comment.profileImage||'/logo192.png'} width='50px' alt='User Icon' />\n      </div>\n      <div className='comment-right-part'>\n        <div className='comment-content'>\n          <div className='comment-author'>{comment.userName}</div>\n\n        </div>\n        {!isEditing && <div className='comment-text'>{comment.body}</div>}\n        {isEditing && (\n          <CommentForm\n            submitLabel={faEdit}\n            hasCancelButton\n            initialText={comment.body}\n            handleSubmit={text => updateComment(text, comment.id)}\n            handleCancel={() => {\n              setActiveComment(null)\n            }}\n            placeholder='Updated comment'\n          />\n        )}\n        <div className='comment-actions'>\n          <div className='comment-date'> {createdAt} </div>\n          {canReply && (\n            <div\n              className='comment-action'\n              onClick={() =>\n                setActiveComment({ id: comment.id, type: 'replying' })}\n            >\n              Reply\n            </div>\n          )}\n          {canEdit && (\n            <div\n              className='comment-action'\n              onClick={() =>\n                setActiveComment({ id: comment.id, type: 'editing' })}\n            >\n              Edit\n            </div>\n          )}\n          {canDelete && (\n            <div\n              className='comment-action'\n              onClick={() => deleteComment(comment.id)}\n            >\n              Delete\n            </div>\n          )}\n        </div>\n        {isReplying && (\n          <CommentForm\n            submitLabel={faReply}\n            handleSubmit={text => addComment(text, replyId)}\n            placeholder='Reply'\n          />\n        )}\n        {replies.length > 0 && (\n          <div className='replies'>\n            {replies.map(reply => (\n              <Comment\n              profileImage={reply.profileImage}\n                comment={reply}\n                key={reply.id}\n                setActiveComment={setActiveComment}\n                activeComment={activeComment}\n                updateComment={updateComment}\n                deleteComment={deleteComment}\n                addComment={addComment}\n                parentId={reply.id}\n                replies={getReplies(reply.id)}\n                currentUserId={currentUserId}\n                getReplies = {getReplies}\n              />\n            ))}\n          </div>\n        )}\n      </div>\n    </div>\n  )\n}\n\nexport default Comment\n"]},"metadata":{},"sourceType":"module"}