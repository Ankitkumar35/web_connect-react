{"ast":null,"code":"var _jsxFileName = \"/Users/ankit/Desktop/ism-connect-web-main/src/pages/Search.jsx\";\nimport React, { Component } from 'react';\nimport Topbar from '../components/common/Topbar';\nimport Filters from '../components/search/Filters';\nimport ResultsContainer from '../components/search/ResultsContainer';\nimport LeftDash from '../components/common/LeftDash';\nimport filters from '../components/search/defaultFilters';\nimport { parseQuery } from '../utils/url';\nimport axios from 'axios';\nimport { isLoggedIn } from '../utils/auth';\nimport BrowserStore from '../utils/BrowserStore';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst mql = window.matchMedia(`(min-width: 800px)`);\nexport default class Search extends Component {\n  constructor() {\n    super();\n\n    this.handleReset = ev => {\n      this.setState({\n        mainSelectedOption: null,\n        subFilters: {}\n      });\n    };\n\n    this.mediaQueryChanged = () => {\n      this.setState({\n        bigScreen: mql.matches\n      });\n    };\n\n    this.handleMainFilterChange = mainSelectedOption => {\n      this.setState({\n        mainSelectedOption,\n        subFilters: {}\n      });\n    };\n\n    this.handleSubFilterChange = (subSelectedOption, key) => {\n      this.setState({\n        subFilters: { ...this.state.subFilters,\n          [key]: subSelectedOption\n        }\n      });\n    };\n\n    this.handleResult = q => {\n      axios.get('/api/v1/search/' + (q || this.state.query)).then(res => {\n        var people = res.data.users;\n\n        for (var i = 0; i < people.length; i++) {\n          people[i][\"heading\"] = people[i][\"email\"];\n        }\n\n        this.setState({\n          results: { ...this.state.results,\n            people: people\n          }\n        });\n      }).catch(err => {\n        console.log(err);\n      });\n    };\n\n    this.handleResultFromSearchPage = query => {\n      this.setState({\n        query\n      });\n      this.handleResult(query);\n    };\n\n    const params = parseQuery(window.location.href);\n    this.state = {\n      results: {\n        people: [],\n        posts: [{\n          userName: 'William Weasley',\n          userHeading: 'billy',\n          content: 'Lorem ipsum dolor sit amet consectetur adipisicing elit. Ducimus ut asperiores illum nulla modi aut voluptatibus culpa totam eum voluptatem. Dolor aliquid voluptate beatae cupiditate autem quae quibusdam mollitia unde!',\n          image: 'https://static.wikia.nocookie.net/harrypotter/images/5/59/Bill_Weasley_DHF1_promo.jpg'\n        }]\n      },\n      bigScreen: mql.matches,\n      mainSelectedOption: null,\n      subFilters: {},\n      filters,\n      query: params.q || ''\n    };\n  }\n\n  componentDidMount() {\n    mql.addListener(this.mediaQueryChanged);\n    this.handleResult();\n  }\n\n  componentWillUnmount() {\n    mql.removeListener(this.mediaQueryChanged);\n  }\n\n  render() {\n    let user;\n\n    if (isLoggedIn()) {\n      user = BrowserStore.get('user-info', true);\n    }\n\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"d-flex flex-column\",\n      children: [/*#__PURE__*/_jsxDEV(LeftDash, {\n        vertical: false\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 4\n      }, this), /*#__PURE__*/_jsxDEV(Topbar, {\n        height: this.state.bigScreen ? '12vh' : '10vh',\n        showLogo: true,\n        query: this.state.query,\n        profileName: isLoggedIn() ? user.name : undefined,\n        handleResult: this.handleResultFromSearchPage\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 4\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          // position: 'relative', \n          height: '88vh',\n          overflow: 'hidden',\n          flexShrink: '0',\n          background: 'rgb(250, 250, 250)'\n        },\n        className: \"d-flex flex-column align-items-center\",\n        children: [/*#__PURE__*/_jsxDEV(Filters, {\n          height: \"10vh\",\n          handleReset: this.handleReset,\n          handleSubFilterChange: this.handleSubFilterChange,\n          handleMainFilterChange: this.handleMainFilterChange,\n          mainSelectedOption: this.state.mainSelectedOption,\n          subFilters: this.state.subFilters,\n          filters: this.state.filters,\n          clearValue: key => this.setState({\n            subFilters: {\n              [key]: null\n            }\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 123,\n          columnNumber: 5\n        }, this), /*#__PURE__*/_jsxDEV(ResultsContainer, {\n          bigScreen: this.state.bigScreen,\n          results: this.state.results\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 132,\n          columnNumber: 5\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 4\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 3\n    }, this);\n  }\n\n}","map":{"version":3,"sources":["/Users/ankit/Desktop/ism-connect-web-main/src/pages/Search.jsx"],"names":["React","Component","Topbar","Filters","ResultsContainer","LeftDash","filters","parseQuery","axios","isLoggedIn","BrowserStore","mql","window","matchMedia","Search","constructor","handleReset","ev","setState","mainSelectedOption","subFilters","mediaQueryChanged","bigScreen","matches","handleMainFilterChange","handleSubFilterChange","subSelectedOption","key","state","handleResult","q","get","query","then","res","people","data","users","i","length","results","catch","err","console","log","handleResultFromSearchPage","params","location","href","posts","userName","userHeading","content","image","componentDidMount","addListener","componentWillUnmount","removeListener","render","user","name","undefined","height","overflow","flexShrink","background"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\n\nimport Topbar from '../components/common/Topbar'\nimport Filters from '../components/search/Filters'\nimport ResultsContainer from '../components/search/ResultsContainer'\nimport LeftDash from '../components/common/LeftDash'\n\nimport filters from '../components/search/defaultFilters'\nimport { parseQuery } from '../utils/url'\nimport axios from 'axios'\nimport { isLoggedIn } from '../utils/auth'\nimport BrowserStore from '../utils/BrowserStore'\n\nconst mql = window.matchMedia(`(min-width: 800px)`)\n\nexport default class Search extends Component {\n\tconstructor() {\n\t\tsuper()\n\t\tconst params = parseQuery(window.location.href)\n\t\tthis.state = {\n\t\t\tresults: {\n\t\t\t\tpeople: [],\n\t\t\t\tposts: [\n\t\t\t\t\t{\n\t          userName: 'William Weasley', \n\t          userHeading: 'billy', \n\t          content: 'Lorem ipsum dolor sit amet consectetur adipisicing elit. Ducimus ut asperiores illum nulla modi aut voluptatibus culpa totam eum voluptatem. Dolor aliquid voluptate beatae cupiditate autem quae quibusdam mollitia unde!',\n\t          image: 'https://static.wikia.nocookie.net/harrypotter/images/5/59/Bill_Weasley_DHF1_promo.jpg'\n\t        },\n\t\t\t\t]\n\t\t\t},\n\t\t\tbigScreen: mql.matches,\n\t\t\tmainSelectedOption: null,\n    \tsubFilters: {},\n    \tfilters,\n    \tquery: params.q || '',\n\t\t}\n\t}\n\n  handleReset = (ev) => {\n  \tthis.setState({\n  \t\tmainSelectedOption: null,\n  \t\tsubFilters: {}\n  \t})\n  }\n\n\tcomponentDidMount() {\n\t\tmql.addListener(this.mediaQueryChanged)\n\t\tthis.handleResult()\n\t}\n\t\n\tcomponentWillUnmount() {\n\t\tmql.removeListener(this.mediaQueryChanged)\n\t}\n\n\tmediaQueryChanged = () => {\n    this.setState({ bigScreen: mql.matches })\n  }\n\n  handleMainFilterChange = (mainSelectedOption) => {\n    this.setState({ mainSelectedOption, subFilters: {} })\n  }\n\n  handleSubFilterChange = (subSelectedOption, key) => {\n  \tthis.setState({\n  \t\tsubFilters: {\n  \t\t\t...this.state.subFilters,\n  \t\t\t[key]: subSelectedOption\n  \t\t}\n  \t})\n  }\n\n  handleResult = q => {\n\t\taxios.get('/api/v1/search/'+(q||this.state.query))\n    .then((res)=>{\n      var people = res.data.users\n      for(var i=0; i < people.length; i++) {\n          people[i][\"heading\"] = people[i][\"email\"]\n      }\n\t\t  this.setState({\n\t\t\t  results:{\n\t\t\t\t  ...this.state.results,\n\t\t\t\t  people:people\n\t\t\t  }\n\t\t  })\n    })\n    .catch((err)=>{\n      console.log(err)\n    })\n  }\n\n  handleResultFromSearchPage = query => {\n\t\tthis.setState({ query })\n\t\tthis.handleResult(query)\n  }\n\n\trender() {\n\t\tlet user\n\t\tif(isLoggedIn())\n\t\t{\n\t\t\tuser = BrowserStore.get('user-info', true);\n\t\t}\n\t\t\n\t\treturn (\n\t\t<div className=\"d-flex flex-column\">\n\t\t\t<LeftDash vertical={false} />\n\t\t\t<Topbar \n\t\t\t\theight={this.state.bigScreen ? '12vh' : '10vh'} \n\t\t\t\tshowLogo={true} \n\t\t\t\tquery={this.state.query} \n\t\t\t\tprofileName={isLoggedIn() ? user.name : undefined}\n\t\t\t\thandleResult = {this.handleResultFromSearchPage}/>\n\t\t\t<div \n\t\t\t\tstyle={{\n\t\t\t\t\t// position: 'relative', \n\t\t\t\t\theight: '88vh', \n\t\t\t\t\toverflow: 'hidden',\n\t\t\t\t\tflexShrink: '0',\n\t\t\t\t\tbackground: 'rgb(250, 250, 250)'\n\t\t\t\t}} \n\t\t\t\tclassName=\"d-flex flex-column align-items-center\"\n\t\t\t>\n\t\t\t\t<Filters \n\t\t\t\t\theight=\"10vh\" \n\t\t\t\t\thandleReset={this.handleReset} \n\t\t\t\t\thandleSubFilterChange={this.handleSubFilterChange} \n\t\t\t\t\thandleMainFilterChange={this.handleMainFilterChange} \n\t\t\t\t\tmainSelectedOption={this.state.mainSelectedOption}\n\t\t\t\t\tsubFilters={this.state.subFilters} \n\t\t\t\t\tfilters={this.state.filters}\n\t\t\t\t\tclearValue={(key) => this.setState({ subFilters: {[key]: null} })} />\n\t\t\t\t<ResultsContainer bigScreen={this.state.bigScreen} results={this.state.results} />\n\t\t\t</div>\n\t\t</div>\n\t\t);\n\t}\n}\n"]},"metadata":{},"sourceType":"module"}